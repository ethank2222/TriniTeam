<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Enhanced Multi-Agent Intelligence Platform</title>
        <meta
            name="description"
            content="AI-powered development coordination with enhanced performance monitoring and real-time collaboration"
        />
        <meta
            name="keywords"
            content="AI, multi-agent, development, automation, collaboration"
        />

        <!-- Preconnect to external resources -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />

        <!-- Fonts -->
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />

        <!-- Icons -->
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
            rel="stylesheet"
        />

        <!-- Main Stylesheet -->
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/style.css') }}"
        />

        <!-- PWA Support -->
        <link
            rel="manifest"
            href="{{ url_for('static', filename='manifest.json') }}"
        />
        <meta name="theme-color" content="#2563eb" />

        <!-- Favicon -->
        <link
            rel="icon"
            type="image/svg+xml"
            href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ§ </text></svg>"
        />
    </head>
    <body>
        <div id="app" class="app-container">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="brand">
                        <div class="brand-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="brand-text">
                            <h1>Multi-Agent Intelligence Platform</h1>
                            <p>AI-Powered Development Coordination</p>
                        </div>
                    </div>

                    <div class="header-actions">
                        <div class="connection-status" id="connection-status">
                            <div class="status-dot connected"></div>
                            <span>Connected</span>
                        </div>

                        <div class="system-metrics-summary">
                            <div class="metric-summary">
                                <i class="fas fa-users"></i>
                                <span id="header-active-agents">0</span>
                            </div>
                            <div class="metric-summary">
                                <i class="fas fa-tasks"></i>
                                <span id="header-tasks-completed">0</span>
                            </div>
                            <div class="metric-summary">
                                <i class="fas fa-clock"></i>
                                <span id="header-system-uptime">00:00:00</span>
                            </div>
                        </div>

                        <button id="system-status" class="status-btn">
                            <i class="fas fa-circle"></i>
                            <span>System Ready</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Navigation -->
            <nav class="navigation">
                <div class="nav-container">
                    <div class="nav-tabs">
                        <button class="nav-tab active" data-view="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </button>
                        <button class="nav-tab" data-view="agents">
                            <i class="fas fa-users-cog"></i>
                            <span>Agents</span>
                        </button>
                        <button class="nav-tab" data-view="communications">
                            <i class="fas fa-comments"></i>
                            <span>Communications</span>
                        </button>
                        <button class="nav-tab" data-view="files">
                            <i class="fas fa-folder-open"></i>
                            <span>Files</span>
                        </button>
                        <button class="nav-tab" data-view="performance">
                            <i class="fas fa-chart-line"></i>
                            <span>Performance</span>
                        </button>
                        <button class="nav-tab" data-view="logs">
                            <i class="fas fa-terminal"></i>
                            <span>Logs</span>
                        </button>
                    </div>

                    <div class="nav-actions">
                        <button id="refresh-dashboard" class="nav-action-btn">
                            <i class="fas fa-sync"></i>
                            <span>Refresh</span>
                        </button>
                        <button id="performance-report" class="nav-action-btn">
                            <i class="fas fa-chart-bar"></i>
                            <span>Analytics</span>
                        </button>
                        <button id="export-logs" class="nav-action-btn">
                            <i class="fas fa-download"></i>
                            <span>Export</span>
                        </button>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Dashboard View -->
                <div id="dashboard-view" class="view active">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>System Dashboard</h2>
                            <p>
                                Monitor your multi-agent system performance and
                                activity
                            </p>
                        </div>
                        <div class="view-actions">
                            <button
                                id="pause-project"
                                class="btn btn-outline"
                                disabled
                            >
                                <i class="fas fa-pause"></i>
                                <span>Pause</span>
                            </button>
                            <button
                                id="download-project"
                                class="btn btn-primary"
                            >
                                <i class="fas fa-download"></i>
                                <span>Download</span>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <!-- System Metrics Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>System Metrics</h3>
                                <div class="card-actions">
                                    <button
                                        class="action-btn"
                                        id="refresh-metrics"
                                    >
                                        <i class="fas fa-sync"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="metrics-grid">
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="active-agents-count"
                                        >
                                            0
                                        </div>
                                        <div class="metric-label">
                                            Active Agents
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="tasks-completed"
                                        >
                                            0
                                        </div>
                                        <div class="metric-label">
                                            Tasks Completed
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="messages-sent"
                                        >
                                            0
                                        </div>
                                        <div class="metric-label">
                                            Messages Sent
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="system-uptime"
                                        >
                                            00:00:00
                                        </div>
                                        <div class="metric-label">
                                            System Uptime
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="files-created"
                                        >
                                            0
                                        </div>
                                        <div class="metric-label">
                                            Files Created
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div
                                            class="metric-value"
                                            id="api-calls"
                                        >
                                            0
                                        </div>
                                        <div class="metric-label">
                                            API Calls
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Task Queue Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Task Queue</h3>
                                <div class="card-actions">
                                    <button
                                        class="action-btn"
                                        id="clear-failed-tasks"
                                    >
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="task-queue-metrics">
                                    <div class="queue-metric">
                                        <div class="queue-icon pending">
                                            <i class="fas fa-clock"></i>
                                        </div>
                                        <div class="queue-info">
                                            <div
                                                class="queue-count"
                                                id="tasks-pending"
                                            >
                                                0
                                            </div>
                                            <div class="queue-label">
                                                Pending
                                            </div>
                                        </div>
                                    </div>
                                    <div class="queue-metric">
                                        <div class="queue-icon in-progress">
                                            <i class="fas fa-cog fa-spin"></i>
                                        </div>
                                        <div class="queue-info">
                                            <div
                                                class="queue-count"
                                                id="tasks-in-progress"
                                            >
                                                0
                                            </div>
                                            <div class="queue-label">
                                                In Progress
                                            </div>
                                        </div>
                                    </div>
                                    <div class="queue-metric">
                                        <div class="queue-icon completed">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="queue-info">
                                            <div
                                                class="queue-count"
                                                id="tasks-completed-queue"
                                            >
                                                0
                                            </div>
                                            <div class="queue-label">
                                                Completed
                                            </div>
                                        </div>
                                    </div>
                                    <div class="queue-metric">
                                        <div class="queue-icon failed">
                                            <i class="fas fa-times"></i>
                                        </div>
                                        <div class="queue-info">
                                            <div
                                                class="queue-count"
                                                id="tasks-failed"
                                            >
                                                0
                                            </div>
                                            <div class="queue-label">
                                                Failed
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Project Control Card -->
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Project Control</h3>
                                <div class="project-status" id="project-status">
                                    <div class="status-indicator">
                                        <div class="status-dot idle"></div>
                                        <span>Idle</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="project-description"
                                        >Project Description</label
                                    >
                                    <textarea
                                        id="project-description"
                                        class="form-textarea"
                                        placeholder="Describe your project requirements in detail..."
                                        rows="4"
                                    ></textarea>
                                    <div class="form-hint">
                                        <i class="fas fa-lightbulb"></i>
                                        <span
                                            >Be specific about technologies,
                                            features, and requirements for
                                            better results</span
                                        >
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Quick Templates:</label>
                                    <div class="template-buttons">
                                        <button
                                            class="template-btn"
                                            data-template="web-app"
                                        >
                                            <i class="fas fa-globe"></i>
                                            <span>Web App</span>
                                        </button>
                                        <button
                                            class="template-btn"
                                            data-template="api"
                                        >
                                            <i class="fas fa-server"></i>
                                            <span>API</span>
                                        </button>
                                        <button
                                            class="template-btn"
                                            data-template="dashboard"
                                        >
                                            <i class="fas fa-chart-pie"></i>
                                            <span>Dashboard</span>
                                        </button>
                                        <button
                                            class="template-btn"
                                            data-template="mobile"
                                        >
                                            <i class="fas fa-mobile-alt"></i>
                                            <span>Mobile App</span>
                                        </button>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button
                                        id="start-project"
                                        class="btn btn-primary"
                                    >
                                        <i class="fas fa-play"></i>
                                        <span>Start Project</span>
                                    </button>
                                    <button
                                        id="stop-project"
                                        class="btn btn-secondary"
                                        disabled
                                    >
                                        <i class="fas fa-stop"></i>
                                        <span>Stop Project</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agents View -->
                <div id="agents-view" class="view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>Agent Management</h2>
                            <p>Configure, monitor, and manage your AI agents</p>
                        </div>
                        <div class="view-actions">
                            <button class="btn btn-outline" id="export-agents">
                                <i class="fas fa-download"></i>
                                <span>Export</span>
                            </button>
                        </div>
                    </div>

                    <div class="agents-grid" id="agents-grid">
                        <!-- Agent cards will be populated here -->
                    </div>
                </div>

                <!-- Communications View -->
                <div id="communications-view" class="view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>Agent Communications</h2>
                            <p>Real-time messaging and system communications</p>
                        </div>
                        <div class="view-actions">
                            <button
                                class="btn btn-outline"
                                id="export-messages"
                            >
                                <i class="fas fa-download"></i>
                                <span>Export</span>
                            </button>
                            <button
                                class="btn btn-secondary"
                                id="clear-messages"
                            >
                                <i class="fas fa-trash-alt"></i>
                                <span>Clear</span>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-header">
                                <h3>Message History</h3>
                                <div class="card-actions">
                                    <select
                                        id="message-filter"
                                        class="form-select"
                                    >
                                        <option value="all">
                                            All Messages
                                        </option>
                                        <option value="task_assignment">
                                            Task Assignments
                                        </option>
                                        <option value="task_completion">
                                            Task Completions
                                        </option>
                                        <option value="status_update">
                                            Status Updates
                                        </option>
                                        <option value="error">Errors</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-content">
                                <div class="messages-list" id="messages-list">
                                    <!-- Messages will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Files View -->
                <div id="files-view" class="view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>Project Files</h2>
                            <p>Browse and manage generated project files</p>
                        </div>
                        <div class="view-actions">
                            <button id="refresh-files" class="btn btn-outline">
                                <i class="fas fa-sync"></i>
                                <span>Refresh</span>
                            </button>
                            <button
                                id="download-all-files"
                                class="btn btn-primary"
                            >
                                <i class="fas fa-download"></i>
                                <span>Download All</span>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>File Browser</h3>
                        </div>
                        <div class="card-content">
                            <div id="files-container">
                                <div class="empty-state">
                                    <i class="fas fa-folder-open"></i>
                                    <h3>No files created yet</h3>
                                    <p>
                                        Files will appear here as the project
                                        progresses.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Performance View -->
                <div id="performance-view" class="view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>Performance Analytics</h2>
                            <p>
                                Monitor system performance and agent efficiency
                            </p>
                        </div>
                        <div class="view-actions">
                            <button
                                id="generate-report"
                                class="btn btn-primary"
                            >
                                <i class="fas fa-file-pdf"></i>
                                <span>Generate Report</span>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>Performance Overview</h3>
                        </div>
                        <div class="card-content">
                            <p>Performance analytics coming soon...</p>
                        </div>
                    </div>
                </div>

                <!-- Logs View -->
                <div id="logs-view" class="view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>System Logs</h2>
                            <p>
                                Comprehensive system logging and debugging
                                information
                            </p>
                        </div>
                        <div class="view-actions">
                            <button id="clear-logs" class="btn btn-secondary">
                                <i class="fas fa-trash-alt"></i>
                                <span>Clear Logs</span>
                            </button>
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3>System Logs</h3>
                        </div>
                        <div class="card-content">
                            <div id="system-logs">
                                <p>System logs will appear here...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Loading Overlay -->
            <div id="loading-overlay" class="loading-overlay">
                <div class="loading-content">
                    <div class="loading-spinner">
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                        <div class="spinner-ring"></div>
                    </div>
                    <p>Processing...</p>
                </div>
            </div>

            <!-- Notification Container -->
            <div
                id="notification-container"
                class="notification-container"
            ></div>
        </div>

        <!-- Scripts -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
        <script src="{{ url_for('static', filename='js/app.js') }}"></script>

        <!-- Service Worker Registration -->
        <script>
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", () => {
                    navigator.serviceWorker
                        .register('{{ url_for("static", filename="sw.js") }}')
                        .then((registration) => {
                            console.log("SW registered: ", registration);
                        })
                        .catch((registrationError) => {
                            console.log(
                                "SW registration failed: ",
                                registrationError
                            );
                        });
                });
            }
        </script>
    </body>
</html>
